{"version":3,"file":"clippy.js","sources":["../lib/queue.js","../lib/animator.js","../lib/balloon.js","../lib/agent.js","../lib/load.js","../lib/index.js"],"sourcesContent":["import $ from 'jquery'\n\nexport default class Queue {\n    constructor (onEmptyCallback) {\n        this._queue = [];\n        this._onEmptyCallback = onEmptyCallback;\n    }\n\n    /***\n     *\n     * @param {function(Function)} func\n     * @returns {jQuery.Deferred}\n     */\n    queue (func) {\n        this._queue.push(func);\n\n        if (this._queue.length === 1 && !this._active) {\n            this._progressQueue();\n        }\n    }\n\n    _progressQueue () {\n\n        // stop if nothing left in queue\n        if (!this._queue.length) {\n            this._onEmptyCallback();\n            return;\n        }\n\n        let f = this._queue.shift();\n        this._active = true;\n\n        // execute function\n        let completeFunction = $.proxy(this.next, this);\n        f(completeFunction);\n    }\n\n    clear () {\n        this._queue = [];\n    }\n\n    next () {\n        this._active = false;\n        this._progressQueue();\n    }\n}\n\n\n\n","import $ from 'jquery'\n\nexport default class Animator {\n\n    constructor (el, path, data, sounds) {\n        this._el = el;\n        this._data = data;\n        this._path = path;\n        this._currentFrameIndex = 0;\n        this._currentFrame = undefined;\n        this._exiting = false;\n        this._currentAnimation = undefined;\n        this._endCallback = undefined;\n        this._started = false;\n        this._sounds = {};\n        this.currentAnimationName = undefined;\n        this.preloadSounds(sounds);\n        this._overlays = [this._el];\n        let curr = this._el;\n\n        this._setupElement(this._el);\n        for (let i = 1; i < this._data.overlayCount; i++) {\n            let inner = this._setupElement($('<div></div>'));\n            curr.append(inner);\n            this._overlays.push(inner);\n            curr = inner;\n        }\n    }\n\n    _setupElement (el) {\n        let frameSize = this._data.framesize;\n        el.css('display', \"none\");\n        el.css({ width: frameSize[0], height: frameSize[1] });\n        el.css('background', \"url('\" + this._path + \"/map.png') no-repeat\");\n\n        return el;\n    }\n\n    animations () {\n        let r = [];\n        let d = this._data.animations;\n        for (let n in d) {\n            r.push(n);\n        }\n        return r;\n    }\n\n    preloadSounds (sounds) {\n\n        for (let i = 0; i < this._data.sounds.length; i++) {\n            let snd = this._data.sounds[i];\n            let uri = sounds[snd];\n            if (!uri) continue;\n            this._sounds[snd] = new Audio(uri);\n\n        }\n    }\n\n    hasAnimation (name) {\n        return !!this._data.animations[name];\n    }\n\n    exitAnimation () {\n        this._exiting = true;\n    }\n\n    showAnimation (animationName, stateChangeCallback) {\n        this._exiting = false;\n\n        if (!this.hasAnimation(animationName)) {\n            return false;\n        }\n\n        this._currentAnimation = this._data.animations[animationName];\n        this.currentAnimationName = animationName;\n\n\n        if (!this._started) {\n            this._step();\n            this._started = true;\n        }\n\n        this._currentFrameIndex = 0;\n        this._currentFrame = undefined;\n        this._endCallback = stateChangeCallback;\n\n        return true;\n    }\n\n    _draw () {\n        let images = [];\n        if (this._currentFrame) images = this._currentFrame.images || [];\n\n        for (let i = 0; i < this._overlays.length; i++) {\n            if (i < images.length) {\n                let xy = images[i];\n                let bg = -xy[0] + 'px ' + -xy[1] + 'px';\n                this._overlays[i].css({ 'background-position': bg, 'display': 'block' });\n            }\n            else {\n                this._overlays[i].css('display', 'none');\n            }\n\n        }\n    }\n\n    _getNextAnimationFrame () {\n        if (!this._currentAnimation) return undefined;\n        // No current frame. start animation.\n        if (!this._currentFrame) return 0;\n        let currentFrame = this._currentFrame;\n        let branching = this._currentFrame.branching;\n\n\n        if (this._exiting && currentFrame.exitBranch !== undefined) {\n            return currentFrame.exitBranch;\n        }\n        else if (branching) {\n            let rnd = Math.random() * 100;\n            for (let i = 0; i < branching.branches.length; i++) {\n                let branch = branching.branches[i];\n                if (rnd <= branch.weight) {\n                    return branch.frameIndex;\n                }\n\n                rnd -= branch.weight;\n            }\n        }\n\n        return this._currentFrameIndex + 1;\n    }\n\n\n    _playSound () {\n        let s = this._currentFrame.sound;\n        if (!s) return;\n        let audio = this._sounds[s];\n        if (audio) audio.play();\n    }\n\n    _atLastFrame () {\n        return this._currentFrameIndex >= this._currentAnimation.frames.length - 1;\n    }\n\n\n    _step () {\n        if (!this._currentAnimation) return;\n        let newFrameIndex = Math.min(this._getNextAnimationFrame(), this._currentAnimation.frames.length - 1);\n        let frameChanged = !this._currentFrame || this._currentFrameIndex !== newFrameIndex;\n        this._currentFrameIndex = newFrameIndex;\n\n        // always switch frame data, unless we're at the last frame of an animation with a useExitBranching flag.\n        if (!(this._atLastFrame() && this._currentAnimation.useExitBranching)) {\n            this._currentFrame = this._currentAnimation.frames[this._currentFrameIndex];\n        }\n\n        this._draw();\n        this._playSound();\n\n        this._loop = window.setTimeout($.proxy(this._step, this), this._currentFrame.duration);\n\n\n        // fire events if the frames changed and we reached an end\n        if (this._endCallback && frameChanged && this._atLastFrame()) {\n            if (this._currentAnimation.useExitBranching && !this._exiting) {\n                this._endCallback(this.currentAnimationName, Animator.States.WAITING);\n            }\n            else {\n                this._endCallback(this.currentAnimationName, Animator.States.EXITED);\n            }\n        }\n    }\n\n    /***\n     * Pause animation execution\n     */\n    pause () {\n        window.clearTimeout(this._loop);\n    }\n\n    /***\n     * Resume animation\n     */\n    resume () {\n        this._step();\n    }\n}\n\n\nAnimator.States = { WAITING: 1, EXITED: 0 };\n","import $ from 'jquery'\n\nexport default class Balloon {\n    constructor (targetEl) {\n        this._targetEl = targetEl;\n\n        this._hidden = true;\n        this._setup();\n        this.WORD_SPEAK_TIME = 200;\n        this.CLOSE_BALLOON_DELAY = 2000;\n        this._BALLOON_MARGIN = 15;\n    }\n\n    _setup () {\n\n        this._balloon = $('<div class=\"clippy-balloon\"><div class=\"clippy-tip\"></div><div class=\"clippy-content\"></div></div> ').hide();\n        this._content = this._balloon.find('.clippy-content');\n\n        $(document.body).append(this._balloon);\n    }\n\n    reposition () {\n        let sides = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\n\n        for (let i = 0; i < sides.length; i++) {\n            let s = sides[i];\n            this._position(s);\n            if (!this._isOut()) break;\n        }\n    }\n\n    /***\n     *\n     * @param side\n     * @private\n     */\n    _position (side) {\n        let o = this._targetEl.offset();\n        let h = this._targetEl.height();\n        let w = this._targetEl.width();\n        o.top -= $(window).scrollTop();\n        o.left -= $(window).scrollLeft();\n\n        let bH = this._balloon.outerHeight();\n        let bW = this._balloon.outerWidth();\n\n        this._balloon.removeClass('clippy-top-left');\n        this._balloon.removeClass('clippy-top-right');\n        this._balloon.removeClass('clippy-bottom-right');\n        this._balloon.removeClass('clippy-bottom-left');\n\n        let left, top;\n        switch (side) {\n            case 'top-left':\n                // right side of the balloon next to the right side of the agent\n                left = o.left + w - bW;\n                top = o.top - bH - this._BALLOON_MARGIN;\n                break;\n            case 'top-right':\n                // left side of the balloon next to the left side of the agent\n                left = o.left;\n                top = o.top - bH - this._BALLOON_MARGIN;\n                break;\n            case 'bottom-right':\n                // right side of the balloon next to the right side of the agent\n                left = o.left;\n                top = o.top + h + this._BALLOON_MARGIN;\n                break;\n            case 'bottom-left':\n                // left side of the balloon next to the left side of the agent\n                left = o.left + w - bW;\n                top = o.top + h + this._BALLOON_MARGIN;\n                break;\n        }\n\n        this._balloon.css({ top: top, left: left });\n        this._balloon.addClass('clippy-' + side);\n    }\n\n    _isOut () {\n        let o = this._balloon.offset();\n        let bH = this._balloon.outerHeight();\n        let bW = this._balloon.outerWidth();\n\n        let wW = $(window).width();\n        let wH = $(window).height();\n        let sT = $(document).scrollTop();\n        let sL = $(document).scrollLeft();\n\n        let top = o.top - sT;\n        let left = o.left - sL;\n        let m = 5;\n        if (top - m < 0 || left - m < 0) return true;\n        return (top + bH + m) > wH || (left + bW + m) > wW;\n    }\n\n    speak (complete, text, hold) {\n        this._hidden = false;\n        this.show();\n        let c = this._content;\n        // set height to auto\n        c.height('auto');\n        c.width('auto');\n        // add the text\n        c.text(text);\n        // set height\n        c.height(c.height());\n        c.width(c.width());\n        c.text('');\n        this.reposition();\n\n        this._complete = complete;\n        this._sayWords(text, hold, complete);\n    }\n\n    show () {\n        if (this._hidden) return;\n        this._balloon.show();\n    }\n\n    hide (fast) {\n        if (fast) {\n            this._balloon.hide();\n            return;\n        }\n\n        this._hiding = window.setTimeout($.proxy(this._finishHideBalloon, this), this.CLOSE_BALLOON_DELAY);\n    }\n\n    _finishHideBalloon () {\n        if (this._active) return;\n        this._balloon.hide();\n        this._hidden = true;\n        this._hiding = null;\n    }\n\n    _sayWords (text, hold, complete) {\n        this._active = true;\n        this._hold = hold;\n        let words = text.split(/[^\\S-]/);\n        let time = this.WORD_SPEAK_TIME;\n        let el = this._content;\n        let idx = 1;\n\n\n        this._addWord = $.proxy(function () {\n            if (!this._active) return;\n            if (idx > words.length) {\n                delete this._addWord;\n                this._active = false;\n                if (!this._hold) {\n                    complete();\n                    this.hide();\n                }\n            } else {\n                el.text(words.slice(0, idx).join(' '));\n                idx++;\n                this._loop = window.setTimeout($.proxy(this._addWord, this), time);\n            }\n        }, this);\n\n        this._addWord();\n\n    }\n\n    close () {\n        if (this._active) {\n            this._hold = false;\n        } else if (this._hold) {\n            this._complete();\n        }\n    }\n\n    pause () {\n        window.clearTimeout(this._loop);\n        if (this._hiding) {\n            window.clearTimeout(this._hiding);\n            this._hiding = null;\n        }\n    }\n\n    resume () {\n        if (this._addWord) {\n            this._addWord();\n        } else if (!this._hold && !this._hidden) {\n            this._hiding = window.setTimeout($.proxy(this._finishHideBalloon, this), this.CLOSE_BALLOON_DELAY);\n        }\n    }\n}\n\n\n","import $ from 'jquery'\nimport Queue from './queue'\nimport Animator from './animator'\nimport Balloon from './balloon'\n\nexport default class Agent {\n\n    constructor (path,data,sounds) {\n        this.path = path;\n\n        this._queue = new Queue($.proxy(this._onQueueEmpty, this));\n\n        this._el = $('<div class=\"clippy\"></div>').hide();\n\n        $(document.body).append(this._el);\n\n        this._animator = new Animator(this._el, path, data, sounds);\n\n        this._balloon = new Balloon(this._el);\n\n        this._setupEvents();\n    }\n\n    /***\n     *\n     * @param {Number} x\n     * @param {Number} y\n     */\n    gestureAt (x, y) {\n        let d = this._getDirection(x, y);\n        let gAnim = 'Gesture' + d;\n        let lookAnim = 'Look' + d;\n\n        let animation = this.hasAnimation(gAnim) ? gAnim : lookAnim;\n        return this.play(animation);\n    }\n\n    /***\n     *\n     * @param {Boolean=} fast\n     *\n     */\n    hide (fast, callback) {\n        this._hidden = true;\n        let el = this._el;\n        this.stop();\n        if (fast) {\n            this._el.hide();\n            this.stop();\n            this.pause();\n            if (callback) callback();\n            return;\n        }\n\n        return this._playInternal('Hide', function () {\n            el.hide();\n            this.pause();\n            if (callback) callback();\n        })\n    }\n\n\n    moveTo (x, y, duration) {\n        let dir = this._getDirection(x, y);\n        let anim = 'Move' + dir;\n        if (duration === undefined) duration = 1000;\n\n        this._addToQueue(function (complete) {\n            // the simple case\n            if (duration === 0) {\n                this._el.css({ top: y, left: x });\n                this.reposition();\n                complete();\n                return;\n            }\n\n            // no animations\n            if (!this.hasAnimation(anim)) {\n                this._el.animate({ top: y, left: x }, duration, complete);\n                return;\n            }\n\n            let callback = $.proxy(function (name, state) {\n                // when exited, complete\n                if (state === Animator.States.EXITED) {\n                    complete();\n                }\n                // if waiting,\n                if (state === Animator.States.WAITING) {\n                    this._el.animate({ top: y, left: x }, duration, $.proxy(function () {\n                        // after we're done with the movement, do the exit animation\n                        this._animator.exitAnimation();\n                    }, this));\n                }\n\n            }, this);\n\n            this._playInternal(anim, callback);\n        }, this);\n    }\n\n    _playInternal (animation, callback) {\n\n        // if we're inside an idle animation,\n        if (this._isIdleAnimation() && this._idleDfd && this._idleDfd.state() === 'pending') {\n            this._idleDfd.done($.proxy(function () {\n                this._playInternal(animation, callback);\n            }, this))\n        }\n\n        this._animator.showAnimation(animation, callback);\n    }\n\n    play (animation, timeout, cb) {\n        if (!this.hasAnimation(animation)) return false;\n\n        if (timeout === undefined) timeout = 5000;\n\n\n        this._addToQueue(function (complete) {\n            let completed = false;\n            // handle callback\n            let callback = function (name, state) {\n                if (state === Animator.States.EXITED) {\n                    completed = true;\n                    if (cb) cb();\n                    complete();\n                }\n            };\n\n            // if has timeout, register a timeout function\n            if (timeout) {\n                window.setTimeout($.proxy(function () {\n                    if (completed) return;\n                    // exit after timeout\n                    this._animator.exitAnimation();\n                }, this), timeout)\n            }\n\n            this._playInternal(animation, callback);\n        }, this);\n\n        return true;\n    }\n\n    /***\n     *\n     * @param {Boolean=} fast\n     */\n    show (fast) {\n\n        this._hidden = false;\n        if (fast) {\n            this._el.show();\n            this.resume();\n            this._onQueueEmpty();\n            return;\n        }\n\n        if (this._el.css('top') === 'auto' || !this._el.css('left') === 'auto') {\n            let left = $(window).width() * 0.8;\n            let top = ($(window).height() + $(document).scrollTop()) * 0.8;\n            this._el.css({ top: top, left: left });\n        }\n\n        this.resume();\n        return this.play('Show');\n    }\n\n    /***\n     *\n     * @param {String} text\n     */\n    speak (text, hold) {\n        this._addToQueue(function (complete) {\n            this._balloon.speak(complete, text, hold);\n        }, this);\n    }\n\n\n    /***\n     * Close the current balloon\n     */\n    closeBalloon () {\n        this._balloon.hide();\n    }\n\n    delay (time) {\n        time = time || 250;\n\n        this._addToQueue(function (complete) {\n            this._onQueueEmpty();\n            window.setTimeout(complete, time);\n        });\n    }\n\n    /***\n     * Skips the current animation\n     */\n    stopCurrent () {\n        this._animator.exitAnimation();\n        this._balloon.close();\n    }\n\n\n    stop () {\n        // clear the queue\n        this._queue.clear();\n        this._animator.exitAnimation();\n        this._balloon.hide();\n    }\n\n    /***\n     *\n     * @param {String} name\n     * @returns {Boolean}\n     */\n    hasAnimation (name) {\n        return this._animator.hasAnimation(name);\n    }\n\n    /***\n     * Gets a list of animation names\n     *\n     * @return {Array.<string>}\n     */\n    animations () {\n        return this._animator.animations();\n    }\n\n    /***\n     * Play a random animation\n     * @return {jQuery.Deferred}\n     */\n    animate () {\n        let animations = this.animations();\n        let anim = animations[Math.floor(Math.random() * animations.length)];\n        // skip idle animations\n        if (anim.indexOf('Idle') === 0) {\n            return this.animate();\n        }\n        return this.play(anim);\n    }\n\n    /**************************** Utils ************************************/\n\n    /***\n     *\n     * @param {Number} x\n     * @param {Number} y\n     * @return {String}\n     * @private\n     */\n    _getDirection (x, y) {\n        let offset = this._el.offset();\n        let h = this._el.height();\n        let w = this._el.width();\n\n        let centerX = (offset.left + w / 2);\n        let centerY = (offset.top + h / 2);\n\n\n        let a = centerY - y;\n        let b = centerX - x;\n\n        let r = Math.round((180 * Math.atan2(a, b)) / Math.PI);\n\n        // Left and Right are for the character, not the screen :-/\n        if (-45 <= r && r < 45) return 'Right';\n        if (45 <= r && r < 135) return 'Up';\n        if (135 <= r && r <= 180 || -180 <= r && r < -135) return 'Left';\n        if (-135 <= r && r < -45) return 'Down';\n\n        // sanity check\n        return 'Top';\n    }\n\n    /**************************** Queue and Idle handling ************************************/\n\n    /***\n     * Handle empty queue.\n     * We need to transition the animation to an idle state\n     * @private\n     */\n    _onQueueEmpty () {\n        if (this._hidden || this._isIdleAnimation()) return;\n        let idleAnim = this._getIdleAnimation();\n        this._idleDfd = $.Deferred();\n\n        this._animator.showAnimation(idleAnim, $.proxy(this._onIdleComplete, this));\n    }\n\n    _onIdleComplete (name, state) {\n        if (state === Animator.States.EXITED) {\n            this._idleDfd.resolve();\n        }\n    }\n\n    /***\n     * Is the current animation is Idle?\n     * @return {Boolean}\n     * @private\n     */\n    _isIdleAnimation () {\n        let c = this._animator.currentAnimationName;\n        return c && c.indexOf('Idle') === 0;\n    }\n\n\n    /**\n     * Gets a random Idle animation\n     * @return {String}\n     * @private\n     */\n    _getIdleAnimation () {\n        let animations = this.animations();\n        let r = [];\n        for (let i = 0; i < animations.length; i++) {\n            let a = animations[i];\n            if (a.indexOf('Idle') === 0) {\n                r.push(a);\n            }\n        }\n\n        // pick one\n        let idx = Math.floor(Math.random() * r.length);\n        return r[idx];\n    }\n\n    /**************************** Events ************************************/\n\n    _setupEvents () {\n        $(window).on('resize', $.proxy(this.reposition, this));\n\n        this._el.on('mousedown', $.proxy(this._onMouseDown, this));\n\n        this._el.on('dblclick', $.proxy(this._onDoubleClick, this));\n    }\n\n    _onDoubleClick () {\n        if (!this.play('ClickedOn')) {\n            this.animate();\n        }\n    }\n\n    reposition () {\n        if (!this._el.is(':visible')) return;\n        let o = this._el.offset();\n        let bH = this._el.outerHeight();\n        let bW = this._el.outerWidth();\n\n        let wW = $(window).width();\n        let wH = $(window).height();\n        let sT = $(window).scrollTop();\n        let sL = $(window).scrollLeft();\n\n        let top = o.top - sT;\n        let left = o.left - sL;\n        let m = 5;\n        if (top - m < 0) {\n            top = m;\n        } else if ((top + bH + m) > wH) {\n            top = wH - bH - m;\n        }\n\n        if (left - m < 0) {\n            left = m;\n        } else if (left + bW + m > wW) {\n            left = wW - bW - m;\n        }\n\n        this._el.css({ left: left, top: top });\n        // reposition balloon\n        this._balloon.reposition();\n    }\n\n    _onMouseDown (e) {\n        e.preventDefault();\n        this._startDrag(e);\n    }\n\n\n    /**************************** Drag ************************************/\n\n    _startDrag (e) {\n        // pause animations\n        this.pause();\n        this._balloon.hide(true);\n        this._offset = this._calculateClickOffset(e);\n\n        this._moveHandle = $.proxy(this._dragMove, this);\n        this._upHandle = $.proxy(this._finishDrag, this);\n\n        $(window).on('mousemove', this._moveHandle);\n        $(window).on('mouseup', this._upHandle);\n\n        this._dragUpdateLoop = window.setTimeout($.proxy(this._updateLocation, this), 10);\n    }\n\n    _calculateClickOffset (e) {\n        let mouseX = e.pageX;\n        let mouseY = e.pageY;\n        let o = this._el.offset();\n        return {\n            top: mouseY - o.top,\n            left: mouseX - o.left\n        }\n\n    }\n\n    _updateLocation () {\n        this._el.css({ top: this._targetY, left: this._targetX });\n        this._dragUpdateLoop = window.setTimeout($.proxy(this._updateLocation, this), 10);\n    }\n\n    _dragMove (e) {\n        e.preventDefault();\n        let x = e.clientX - this._offset.left;\n        let y = e.clientY - this._offset.top;\n        this._targetX = x;\n        this._targetY = y;\n    }\n\n    _finishDrag () {\n        window.clearTimeout(this._dragUpdateLoop);\n        // remove handles\n        $(window).off('mousemove', this._moveHandle);\n        $(window).off('mouseup', this._upHandle);\n        // resume animations\n        this._balloon.show();\n        this.reposition();\n        this.resume();\n\n    }\n\n    _addToQueue (func, scope) {\n        if (scope) func = $.proxy(func, scope);\n        this._queue.queue(func);\n    }\n\n    /**************************** Pause and Resume ************************************/\n\n    pause () {\n        this._animator.pause();\n        this._balloon.pause();\n\n    }\n\n    resume () {\n        this._animator.resume();\n        this._balloon.resume();\n    }\n\n}","import $ from 'jquery'\r\nimport Agent from './agent'\r\n\r\nexport class load {\r\n    constructor (name, successCb, failCb, base_path) {\r\n        base_path = base_path || window.CLIPPY_CDN || 'https://gitcdn.xyz/repo/pi0/clippyjs/master/assets/agents/'\r\n\r\n        let path = base_path + name;\r\n        let mapDfd = load._loadMap(path);\r\n        let agentDfd = load._loadAgent(name, path);\r\n        let soundsDfd = load._loadSounds(name, path);\r\n\r\n        let data;\r\n        agentDfd.done(function (d) {\r\n            data = d;\r\n        });\r\n\r\n        let sounds;\r\n\r\n        soundsDfd.done(function (d) {\r\n            sounds = d;\r\n        });\r\n\r\n        // wrapper to the success callback\r\n        let cb = function () {\r\n            let a = new Agent(path, data, sounds);\r\n            successCb(a);\r\n        };\r\n\r\n        $.when(mapDfd, agentDfd, soundsDfd).done(cb).fail(failCb);\r\n    }\r\n\r\n    static _loadMap (path) {\r\n        let dfd = load._maps[path];\r\n        if (dfd) return dfd;\r\n\r\n        // set dfd if not defined\r\n        dfd = load._maps[path] = $.Deferred();\r\n\r\n        let src = path + '/map.png';\r\n        let img = new Image();\r\n\r\n        img.onload = dfd.resolve;\r\n        img.onerror = dfd.reject;\r\n\r\n        // start loading the map;\r\n        img.setAttribute('src', src);\r\n\r\n        return dfd.promise();\r\n    }\r\n\r\n    static _loadSounds (name, path) {\r\n        let dfd = load._sounds[name];\r\n        if (dfd) return dfd;\r\n\r\n        // set dfd if not defined\r\n        dfd = load._sounds[name] = $.Deferred();\r\n\r\n        let audio = document.createElement('audio');\r\n        let canPlayMp3 = !!audio.canPlayType && \"\" !== audio.canPlayType('audio/mpeg');\r\n        let canPlayOgg = !!audio.canPlayType && \"\" !== audio.canPlayType('audio/ogg; codecs=\"vorbis\"');\r\n\r\n        if (!canPlayMp3 && !canPlayOgg) {\r\n            dfd.resolve({});\r\n        } else {\r\n            let src = path + (canPlayMp3 ? '/sounds-mp3.js' : '/sounds-ogg.js');\r\n            // load\r\n            load._loadScript(src);\r\n        }\r\n\r\n        return dfd.promise()\r\n    }\r\n\r\n    static _loadAgent (name, path) {\r\n        let dfd = load._data[name];\r\n        if (dfd) return dfd;\r\n\r\n        dfd = load._getAgentDfd(name);\r\n\r\n        let src = path + '/agent.js';\r\n\r\n        load._loadScript(src);\r\n\r\n        return dfd.promise();\r\n    }\r\n\r\n    static _loadScript (src) {\r\n        let script = document.createElement('script');\r\n        script.setAttribute('src', src);\r\n        script.setAttribute('async', 'async');\r\n        script.setAttribute('type', 'text/javascript');\r\n\r\n        document.head.appendChild(script);\r\n    }\r\n\r\n    static _getAgentDfd (name) {\r\n        let dfd = load._data[name];\r\n        if (!dfd) {\r\n            dfd = load._data[name] = $.Deferred();\r\n        }\r\n        return dfd;\r\n    }\r\n}\r\n\r\nload._maps = {};\r\nload._sounds = {};\r\nload._data = {};\r\n\r\nexport function ready (name, data) {\r\n    let dfd = load._getAgentDfd(name);\r\n    dfd.resolve(data);\r\n}\r\n\r\nexport function soundsReady (name, data) {\r\n    let dfd = load._sounds[name];\r\n    if (!dfd) {\r\n        dfd = load._sounds[name] = $.Deferred();\r\n    }\r\n\r\n    dfd.resolve(data);\r\n}\r\n","import Agent from './agent'\r\nimport Animator from './animator'\r\nimport Queue from './queue'\r\nimport Balloon from './balloon'\r\nimport { load, ready, soundsReady } from './load'\r\n\r\nconst clippy = {\r\n    Agent,\r\n    Animator,\r\n    Queue,\r\n    Balloon,\r\n    load,\r\n    ready,\r\n    soundsReady\r\n}\r\n\r\nexport default clippy\r\n\r\nif (typeof window !== 'undefined') {\r\n    window.clippy = clippy\r\n}\r\n\r\n\r\n"],"names":["let","this","const"],"mappings":"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"}